<nav class="navbar  " style="background-color: #000;">
  <div class="container">
    <a class="navbar-brand" href="#">
      <img src="/images/Logo/logo black.png" alt="Bootstrap" width="60" height="60">
    </a>
  </div>
</nav>
<section class="bg-light py-5">
  <div class="container">
    <div class="row">
      <div class="col-xl-8 col-lg-8 mb-4">

        <!-- Checkout -->
        <div class="card shadow-0 border">
          <div class="p-4">
            <hr class="my-4" />

            <h5 class="card-title mb-3">Delivery Address</h5>

            <div class="row mb-3 existAddressDiv">
              {{#each userAddress}}
              <div class="col-lg-6 mb-3">
                <!-- Default checked radio -->
                <div class="form-check h-100 border rounded-3">
                  <div class="p-3">
                    <input class="form-check-input" type="radio" name="flexRadioDefault" value="{{_id}}"
                      id="flexRadioDefault{{_id}}" />
                    <label class="form-check-label" for="flexRadioDefault1">
                      {{firstName}} {{lastName}} <br />
                      <small class="text-muted">{{address}} {{city}} {{state}} {{pincode}} </small>
                    </label>
                  </div>
                </div>
              </div>
              {{/each}}




            </div>
            <h5 id="addNewAddress" class="card-title mb-3 btn btn-dark btn-lg"><i class="fa fa-plus"></i>Add a new
              Address</h5>
            <p class="text-danger addErr fw-bold fs-4"></p>
            <form method="POST" action="/addaddress" id="checkOutAdd" style="display: none;" class="needs-validation "
              novalidate>
              <div class="row">
                <div class="col-sm-6 mb-3">
                  <p class="mb-0">First name</p>
                  <div class="form-outline">
                    <input name="firstName" type="text" id="typeText" placeholder="Type here" class="form-control" />
                  </div>
                </div>
                <div class="col-sm-6 mb-3">
                  <p class="mb-0">Last name</p>
                  <div class="form-outline">
                    <input name="lastName" type="text" id="typeText" placeholder="Type here" class="form-control" />
                  </div>
                </div>



                <div class="col-sm-4 mb-3">
                  <p class="mb-0">City</p>
                  <div class="form-outline">
                    <input name="inputCity" type="text" id="typeText" placeholder="Type here" class="form-control" />
                  </div>
                </div>

                <div class="col-sm-4 mb-3">
                  <p class="mb-0">State</p>
                  <select name="inputState" class="form-select">
                    <option selected></option>
                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                  </select>
                </div>

                <div class="col-sm-4 col-6 mb-3">
                  <p class="mb-0">Zip</p>
                  <div class="form-outline">
                    <input name="inputZip" type="number" id="typeText" class="form-control" />
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <p class="mb-0">Address</p>
                <div class="form-outline">
                  <textarea name="inputAddress" class="form-control" id="textAreaExample1" rows="2"></textarea>
                </div>
              </div>
              <input type="hidden" name="redirect" value="false">
              <div class="float-end">
                <button type="button" id="addressCanceBtn" class="btn btn-light border">Cancel</button>

                <button type="submit" class="btn btn-success shadow-0 border">Save</button>
              </div>
            </form>

            <div class="col-lg-6 mb-3 mt-5">
              <!-- Default checked radio -->
              <h5 class="card-title text-uppercase mb-3">payment options</h5>
              <form id="checkOutForm" action="">
                <div class="form-check h-100 border rounded-3">
                  <div class="p-3">
                    <input class="form-check-input" type="radio" value="cod" name="paymentMethod" id="cod" />
                    <label class="form-check-label" for="cod">
                      COD
                    </label>

                  </div>
                </div>
                <div class="form-check h-100 border rounded-3 mt-3">
                  <div class="p-3">

                    <input class="form-check-input" type="radio" value="online" name="paymentMethod"
                      id="onlinePayment" />
                    <label class="form-check-label" for="onlinePayment">
                      ONLINE PAYMENT
                    </label>
                  </div>
                </div>
                <div class="form-check h-100 ">
                  <div class="p-3">
                    <input type="number" name="totalPrice" value="{{cartData.[0].totalPrice}}" id="" hidden>

                  </div>

                </div>
                <button type="submit" class="btn btn-success btn-lg text-uppercase">confirm
                  order</button>
              </form>
            </div>

          </div>
        </div>
        <!-- Checkout -->
      </div>


      <div class="col-xl-4 col-lg-4 d-flex justify-content-center justify-content-lg-end">
        <div class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px;">
          <h6 class="mb-3">Summary</h6>
          <div class="d-flex justify-content-between">
            <p class="mb-2">Total price:</p>
            <p class="mb-2">₹{{cartData.[0].totalPrice}}</p>
          </div>
          <div class="d-flex justify-content-between">
            <p class="mb-2">Discount:</p>
            <p class="mb-2 text-danger">- ₹ 00.00</p>
          </div>
          <div class="d-flex justify-content-between">
            <p class="mb-2">Shipping cost:</p>
            <p class="mb-2">+ ₹00.00</p>
          </div>
          <hr />
          <div class="d-flex justify-content-between">
            <p class="mb-2">Total price:</p>
            <p class="mb-2 fw-bold">₹{{cartData.[0].totalPrice}}</p>
          </div>

          {{!-- <div class="input-group mt-3 mb-4">
            <input type="text" class="form-control border" name="" placeholder="Promo code" />
            <button class="btn btn-light text-primary border">Apply</button>
          </div> --}}

          <hr />
          <h6 class="text-dark my-4">Items in cart</h6>
          {{#each cartData}}
          {{#each this.products}}
          <div class="d-flex align-items-center mb-4  product" productId="{{_id}}" quantity="{{count}}"
            pricePerQnt="{{price}}">
            <div class="me-3 position-relative">
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-secondary">
                1
              </span>
              <img src="/images/uploads/{{productImage.[0]}}" style=" height: 96px; width: 96px; object-fit: contain;"
                class="img-sm rounded border" />
            </div>
            <div class="">
              <a href="/viewproduct/{{_id}}" class="nav-link">
                {{productName}} <br />
                RAM:{{productFeatures.[0].RAM}}|ROM:{{productFeatures.[0].Storage}}|{{productFeatures.[0].Operating_system}}
              </a>
              <p>Quantity:{{count}}</p>
              <div class="price text-muted">Total: ₹ {{price}}</div>
            </div>
          </div>
          {{/each}}
          {{/each}}
        </div>
      </div>
    </div>
  </div>
</section>

{{>user-footer}}

<script src="/javascripts/checkOut.js"></script>